<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>QULTURE — Store</title>
  <link rel="icon" type="image/png" href="Qulture-Logo_Full-Color.png">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Staatliches&display=swap" rel="stylesheet">
  <!-- EmailJS for order notifications -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="../emails/email-service.js"></script>
  <style>
    :root{
      --bg:#000000;
      --card:#111111;
      --ink:#ffffff;
      --pink:#ff0066;
      --green:#9dff57;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Staatliches', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--ink);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    a{color:inherit}
    header{
      position:sticky;top:0;z-index:50;background:rgba(0,0,0,.85);backdrop-filter:blur(6px);
      border-bottom:2px solid var(--pink);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px 20px}
    .brand{display:flex;align-items:center;gap:14px;text-decoration:none}
    .logo-img{height:64px}
    .wordmark{
      font-family:'Bebas Neue',sans-serif;
      font-size:64px;
      letter-spacing:8px;
      color:#fff;
      text-shadow:-1px -1px 0 var(--pink),1px -1px 0 var(--pink),-1px 1px 0 var(--pink),1px 1px 0 var(--pink);
      text-transform:uppercase;
    }
    .wordmark-logo{
      height:64px;
    }
    nav{display:flex;align-items:center;gap:18px}
    nav a{color:var(--ink);text-decoration:none;font-family:'Bebas Neue',sans-serif;letter-spacing:1px;transition:color 0.2s ease}
    nav a:hover{color:var(--pink)}

    /* Mobile Navigation */
    .mobile-menu-btn{display:none;background:none;border:none;color:var(--ink);font-size:24px;cursor:pointer;padding:8px}
    .mobile-nav{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.95);z-index:1000;flex-direction:column;justify-content:center;align-items:center;gap:30px}
    .mobile-nav.show{display:flex}
    .mobile-nav a{font-size:24px;font-family:'Bebas Neue',sans-serif;letter-spacing:2px;text-decoration:none;color:var(--ink);transition:color 0.2s ease}
    .mobile-nav a:hover{color:var(--pink)}
    .mobile-nav-close{position:absolute;top:20px;right:20px;background:none;border:none;color:var(--ink);font-size:32px;cursor:pointer}
    .cta{background:var(--pink);color:#fff;border:none;padding:10px 16px;font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:1px;cursor:pointer;box-shadow:4px 4px 0 #000;transform:rotate(-1.5deg)}
    .cta:hover{transform:rotate(.5deg) scale(1.03)}

    .hero{position:relative;overflow:hidden;text-align:center;padding:40px 20px}
    .hero-logo{height:140px;margin-bottom:20px}
    .h-title{font-family:'Bebas Neue',sans-serif;font-size:64px;line-height:.95;text-transform:uppercase;text-shadow:-1px -1px 0 var(--pink),1px -1px 0 var(--pink),-1px 1px 0 var(--pink),1px 1px 0 var(--pink)}
    .h-sub{margin-top:10px;font-size:18px;opacity:.9;max-width:700px;margin-left:auto;margin-right:auto}
    .badge{display:inline-block;margin-top:14px;padding:6px 10px;border:2px solid var(--green);color:var(--green);transform:rotate(-2deg)}

    .card{background:var(--card);border:3px solid var(--pink);box-shadow:8px 8px 0 var(--pink);padding:18px;position:relative;margin-top:20px}
    .card::after{content:'';position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(45deg,rgba(255,255,255,.03) 0 10px,transparent 10px 20px)}

    .p-name{font-family:'Bebas Neue',sans-serif;font-size:40px;letter-spacing:1px}
    .price{font-family:'Bebas Neue',sans-serif;font-size:32px;color:var(--green)}
    .swatches, .sizes{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
    .swatch{width:28px;height:28px;border:2px solid #fff;outline:2px solid #000;cursor:pointer;transition:transform 0.2s ease}
    .swatch:hover{transform:scale(1.1)}
    .swatch.black{background:#111}
    /* .swatch.white{background:#eee}  -- keeping for later */
    .size{padding:6px 10px;border:2px solid #fff;background:#000;color:#fff;cursor:pointer;opacity:.9;min-height:32px;transition:all 0.2s ease}
    .size[disabled]{cursor:not-allowed;opacity:.6}
    .size.active{background:#fff;color:#000;border-color:#000;box-shadow:3px 3px 0 #000;transform:rotate(-1deg)}
    .note{font-size:13px;opacity:.7;margin-top:6px}

    .qty-row{display:flex;align-items:center;gap:10px;margin-top:8px}
    .qty-input{width:64px;padding:8px;border:2px solid #fff;background:#000;color:#fff;font-family:'Staatliches',sans-serif;font-size:16px}

    .buy{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    .btn{padding:12px 16px;border:0;cursor:pointer;font-family:'Bebas Neue',sans-serif;letter-spacing:1px;transition:all 0.2s ease;min-height:44px}
    .btn.primary{background:var(--pink);color:#fff;transform:rotate(-1deg)}
    .btn.primary:hover:not([disabled]){transform:rotate(0deg) scale(1.02)}
    .btn.primary[disabled]{filter:grayscale(1);cursor:not-allowed}
    .btn.ghost{background:transparent;color:#fff;border:2px solid #fff}
    .btn.ghost:hover{background:#fff;color:#000}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}

    /* Gallery */
    .gallery{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px;justify-content:center}
    .gallery img{height:180px;border:2px solid #fff;background:#000;cursor:pointer;transition:transform .15s}
    .gallery img:hover{transform:scale(1.03) rotate(-1deg)}

    /* Preview modal */
    .preview{
      position:fixed;inset:0;background:rgba(0,0,0,.9);
      display:flex;align-items:center;justify-content:center;
      opacity:0;pointer-events:none;transition:opacity .2s;z-index:1000
    }
    .preview.show{opacity:1;pointer-events:auto}
    .preview img{max-width:92vw;max-height:88vh;border:3px solid var(--pink);background:#111}

    /* Cart drawer */
    .drawer{
      position:fixed;top:0;right:-420px;width:420px;max-width:90vw;height:100dvh;background:#0b0b0b;color:#fff;border-left:3px solid var(--pink);
      box-shadow:-8px 0 0 var(--pink);transition:right .25s ease;z-index:1100;display:flex;flex-direction:column
    }
    .drawer.open{right:0}
    .drawer header{border-bottom:2px solid var(--pink);padding:14px 16px}
    .drawer h4{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px}
    .drawer .content{padding:14px 16px;overflow:auto;flex:1}
    .line{display:flex;justify-content:space-between;margin:6px 0}
    .mini{opacity:.8;font-size:13px}
    .checkout{border-top:2px solid var(--pink);padding:12px 16px}

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .wrap{padding:12px 16px}
      .wordmark{font-size:32px;letter-spacing:4px}
      .logo-img{height:40px}
      .wordmark-logo{height:40px}
      nav{display:none}
      .mobile-menu-btn{display:block}
      .hero{padding:20px 16px}
      .hero-logo{height:80px}
      .h-title{font-size:32px}
      .h-sub{font-size:16px}
      .card{padding:14px;margin-top:16px}
      .p-name{font-size:28px}
      .price{font-size:24px}
      .swatch{width:24px;height:24px}
      .size{padding:8px 12px;min-height:40px;font-size:14px}
      .btn{padding:12px 20px;font-size:16px;min-height:48px}
      
      /* Mobile Cart - Fixed Height with Proper Scrolling */
      .drawer{width:100vw;right:-100vw;border-left:none;border-top:3px solid var(--pink);height:100vh;overflow:hidden}
      .drawer.open{right:0}
      .drawer header{padding:16px 20px;flex-shrink:0;background:#0b0b0b}
      .drawer h4{font-size:24px}
      .drawer .content{padding:16px 20px;overflow-y:auto;flex:1;height:calc(100vh - 120px)}
      .checkout{padding:16px 20px;flex-shrink:0;background:#0b0b0b;border-top:2px solid var(--pink)}
      .field input,.field select,.field textarea{padding:12px;font-size:16px;margin-bottom:8px}
      .field{margin:8px 0}
      .field label{font-size:14px;margin-bottom:4px;display:block}
    }
    .field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
    .field input,.field select,.field textarea{
      background:#000;border:2px solid #fff;color:#fff;padding:10px;font-family:'Staatliches',sans-serif
    }

    /* Back to questions button */
    .back-btn{
      display:inline-block;
      background:var(--green);
      color:#000;
      border:3px solid #000;
      padding:12px 18px;
      font-family:'Bebas Neue',sans-serif;
      text-decoration:none;
      letter-spacing:1px;
      transform:rotate(-2deg);
      box-shadow:5px 5px 0 #000;
      transition:all .2s ease;
    }
    .back-btn:hover{
      background:#000;color:var(--pink);border-color:var(--pink);transform:rotate(1deg) scale(1.05)
    }

    /* Mobile */
    @media (max-width:920px){
      .grid-2{grid-template-columns:1fr}
      .h-title{font-size:48px}
      .hero-logo{height:100px}
    }
    @media (max-width:768px){
      .wrap{padding:12px 16px}
      .wordmark{font-size:48px;letter-spacing:6px}
      .wordmark-logo{height:48px}
      .logo-img{height:48px}
      .h-title{font-size:36px}
      .hero{padding:30px 16px}
      .card{padding:16px}
      .btn{padding:10px 14px;font-size:14px}
      .swatches,.sizes{gap:8px}
      .swatch{width:24px;height:24px}
      .size{padding:5px 8px;font-size:14px}
      nav{gap:12px}
      nav a{font-size:14px}
      .cta{font-size:16px;padding:8px 12px}
    }
    @media (max-width:480px){
      .wordmark{font-size:36px;letter-spacing:4px}
      .wordmark-logo{height:40px}
      .logo-img{height:40px}
      .h-title{font-size:28px}
      .h-sub{font-size:14px}
      .p-name{font-size:28px}
      .price{font-size:24px}
      .hero{padding:20px 12px}
      .card{padding:12px}
      .btn{padding:8px 12px;font-size:13px}
      .swatch{width:20px;height:20px}
      .size{padding:4px 6px;font-size:12px}
      nav{gap:8px}
      nav a{font-size:12px}
      .cta{font-size:14px;padding:6px 10px}
      .wrap{padding:8px 12px}
      footer .wrap{flex-direction:column;text-align:center;gap:8px}
    }

    .list{margin-top:12px}
    .list li{margin-left:18px;margin-bottom:6px}

    footer{margin-top:auto;border-top:2px solid var(--pink);background:#0a0a0a}
    footer .wrap{display:flex;justify-content:space-between;gap:16px;align-items:center}
    .mono{font-size:13px;opacity:.7}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;justify-content:space-between;align-items:center;gap:16px">
      <a class="brand" href="#" onclick="event.preventDefault()">
        <img src="Qulture-Logo_Full-Color.png" alt="QULTURE Logo" class="logo-img">
        <img src="Qulture Logo_written.png" alt="QULTURE" class="wordmark-logo">
      </a>
      <nav>
        <a href="#product">Product</a>
        <a href="#details">Details</a>
        <a href="#gallery">Gallery</a>
        <a href="#mission">Mission</a>
        <a href="#jokes">Jokes</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
        <button class="cta" id="openCartBtn">Cart</button>
      </nav>
      <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
    </div>
  </header>

  <!-- Mobile Navigation Overlay -->
  <div class="mobile-nav" id="mobileNav">
    <button class="mobile-nav-close" id="mobileNavClose">×</button>
    <a href="#product" onclick="closeMobileNav()">Product</a>
    <a href="#details" onclick="closeMobileNav()">Details</a>
    <a href="#gallery" onclick="closeMobileNav()">Gallery</a>
    <a href="#mission" onclick="closeMobileNav()">Mission</a>
    <a href="#jokes" onclick="closeMobileNav()">Jokes</a>
    <a href="#faq" onclick="closeMobileNav()">FAQ</a>
    <a href="#contact" onclick="closeMobileNav()">Contact</a>
    <button class="cta" id="mobileCartBtn" onclick="openCart(); closeMobileNav();">Cart</button>
  </div>

  <section class="hero">
    <img src="Qulture-Logo_Full-Color.png" alt="QULTURE Logo" class="hero-logo">
    <h1 class="h-title">Wear the icebreaker.</h1>
    <p class="h-sub">The QULTURE hoodie features a high-contrast, scan-tested QR that takes people to a rotating deck of conversation-sparking questions.</p>
    <span class="badge">First Drop — Placeholder Preview</span>
  </section>

  <main id="product" class="wrap" style="padding:24px 20px 60px">
    <div class="grid-2">
      <div class="card" id="details">
        <h2 class="p-name">QULTURE Hoodie</h2>
        <div class="price">$35.00</div>

        <div class="swatches" aria-label="Color">
          <div class="swatch black" title="Black"></div>
          <!-- <div class="swatch white" title="(Alt) White"></div> -->
        </div>

        <div class="sizes" aria-label="Sizes">
          <button class="size" data-size="XS">XS</button>
          <button class="size" data-size="S">S</button>
          <button class="size" data-size="M">M</button>
          <button class="size" data-size="L">L</button>
          <button class="size" data-size="XL">XL</button>
          <button class="size" data-size="2XL">2XL</button>
        </div>

        <div class="qty-row">
          <label for="qty" class="mini">Qty</label>
          <input id="qty" type="number" min="1" value="1" class="qty-input">
        </div>

        <div class="buy">
          <button class="btn primary" id="addToCart" disabled>Add to cart</button>
          <a class="btn ghost" href="#sizecare">Size & Care</a>
        </div>

        <p class="note">This is a functional demo cart. Checkout collects details locally; payment/email hooks come later.</p>

        <ul class="list" style="margin-top:14px">
          <li>Heavyweight fleece (10–13 oz), soft hand screen print</li>
          <li>Large back QR: scannable from 5–8 ft; sleeve micro-QR facing wearer</li>
          <li>Error correction level H, preserved quiet zone for reliable scans</li>
          <li>Unisex, slightly oversized fit</li>
        </ul>
      </div>
    </div>

    <!-- GALLERY -->
    <div class="card" id="gallery" style="margin-top:20px">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">Gallery</h3>
      <div class="gallery">
        <img src="Assets/mockup-front.png" alt="Front view" onclick="openPreview(this.src)">
        <img src="Assets/mockup-back.png" alt="Back view" onclick="openPreview(this.src)">
        <img src="Assets/mockup-left.png" alt="Left sleeve view" onclick="openPreview(this.src)">
        <img src="Assets/mockup-right.png" alt="Right sleeve view" onclick="openPreview(this.src)">
        <img src="Assets/mockup-front-t.png" alt="T-shirt front view" onclick="openPreview(this.src)">
        <img src="Assets/mockup-back-t.png" alt="T-shirt back view" onclick="openPreview(this.src)">
      </div>
    </div>

    <!-- MISSION -->
    <div class="card" id="mission">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">Mission</h3>
      <p style="margin-top:8px;opacity:.9">
        QULTURE makes <em>wearable connection</em>. Every drop uses a bold, scannable QR that opens something designed to
        pull people closer—questions, games, dares, jokes, you name it. Think of it like giving your hoodie social super-powers,
        minus the cape and the complicated origin story. The goal is simple: help humans start better conversations in the wild,
        one scan at a time.
      </p>
    </div>

    <!-- WHY IT WORKS -->
    <div class="card">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">Why it works</h3>
      <p style="margin-top:8px;opacity:.9">
        You bring the vibe, the hoodie brings the prompt. The QR is tuned for contrast, distance, and that
        "wait… scan that?" curiosity spike. It survives dim bars, bright sun, and small talk. You'll make strangers laugh,
        friends think, and first dates a whole lot less weird. Batteries not included. Also not required.
      </p>
      <p style="margin-top:8px;opacity:.9">
        We keep the quiet zone clean, the error correction beefy, and the pixels chunky enough to read from across a room.
        Translation: people scan it, it works, and you look like the kind of person who plans fun.
      </p>
    </div>

    <!-- JOKES COUNTDOWN -->
    <div class="card" id="jokes">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">Jokes coming soon</h3>
      <p class="note">A jokes QR drop lands on <strong>Feb 9</strong>. Count down with us:</p>
      <div id="countdown" style="font-family:'Bebas Neue',sans-serif;font-size:42px;margin-top:8px;letter-spacing:2px;text-shadow:-1px -1px 0 var(--pink),1px 1px 0 var(--pink)">
        --d --h --m --s
      </div>
    </div>

    <!-- SIZE & CARE -->
    <div class="card" id="sizecare">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">Size & Care</h3>
      <ul class="list" style="margin-top:8px">
        <li>Fit: unisex, slightly oversized. If between sizes, size down for a truer fit.</li>
        <li>Care: turn inside out, cold wash, tumble low or hang dry. Don’t iron the print (unless you like chaos).</li>
        <li>Fabric: heavyweight fleece (10–13 oz), soft hand inks.</li>
      </ul>
    </div>

    <!-- FAQ -->
    <div class="card" id="faq" style="margin-top:20px">
      <h3 style="font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:1px">FAQ</h3>
      <details style="margin-top:10px"><summary>Will the QR scan off fabric?</summary><p class="note">Yes. We print in high contrast with a preserved quiet zone and ECC H. Final tests will be shared before launch.</p></details>
      <details style="margin-top:10px"><summary>When can I buy?</summary><p class="note">Soon™. This cart saves your details; full payment will open after sampling.</p></details>
      <details style="margin-top:10px"><summary>Returns & exchanges?</summary><p class="note">Standard 30-day returns/exchanges will apply at launch.</p></details>
    </div>
  </main>

  <footer id="contact">
    <div class="wrap" style="padding:20px">
      <div class="mono">© <span id="y"></span> QULTURE • Scan. Ask. Connect.</div>
      <a class="back-btn" href="index.html">← Back to Questions</a>
      <div class="mono" style="text-align:right">
        <div><strong>Contact:</strong> Shems Beblawi</div>
        <div>Phone: +1 (480) 274-5159</div>
        <div>Email: <a href="mailto:dissismyemail@gmail.com">dissismyemail@gmail.com</a></div>
      </div>
    </div>
    
    <!-- Modern QULTURE Collection Link -->
    <div style="text-align:center;padding:20px;border-top:2px solid var(--pink);background:#0a0a0a;">
      <a href="../Green_Orange/storefront.html" style="display:inline-block;transition:transform 0.2s ease;">
        <img src="../Green_Orange/Green and Orange.png" alt="Modern QULTURE" style="height:40px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">
      </a>
    </div>
  </footer>

  <!-- Image preview modal -->
  <div id="preview" class="preview" onclick="this.classList.remove('show')">
    <img alt="Preview">
  </div>

  <!-- Cart Drawer -->
  <aside id="cartDrawer" class="drawer" aria-hidden="true">
    <header style="display:flex;justify-content:space-between;align-items:center">
      <h4>Cart</h4>
      <button class="btn ghost" id="closeCartBtn">Close</button>
    </header>
    <div class="content">
      <div id="cartLines"></div>
      <div class="line"><span>Subtotal</span><strong id="subtotal">$0.00</strong></div>
    </div>
    <div class="checkout">
      <form id="checkoutForm">
        <div class="field">
          <label>Name</label>
          <input required name="name" placeholder="Full name">
        </div>
        <div class="field">
          <label>Email</label>
          <input required type="email" name="email" placeholder="you@example.com">
        </div>
        <div class="field">
          <label>Phone</label>
          <input name="phone" placeholder="+1 (___) ___-____">
        </div>
        <div class="field">
          <label>Address</label>
          <input required name="address1" placeholder="Street address">
          <input name="address2" placeholder="Apt / Suite (optional)">
        </div>
        <div style="display:grid;grid-template-columns:2fr 1fr 1fr;gap:8px">
          <div class="field"><label>City</label><input required name="city"></div>
          <div class="field"><label>State</label><input required name="state"></div>
          <div class="field"><label>ZIP</label><input required name="zip"></div>
        </div>
        <div class="field">
          <label>Notes</label>
          <textarea name="notes" rows="3" placeholder="Anything we should know?"></textarea>
        </div>
        <button class="btn primary" type="submit" style="width:100%">Place placeholder order</button>
        <p class="mini" style="margin-top:6px">This saves your order locally (no payment yet). We'll wire email/payment later.</p>
      </form>
    </div>
  </aside>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Image preview
    function openPreview(src){
      const box = document.getElementById('preview');
      box.querySelector('img').src = src;
      box.classList.add('show');
    }

    // Product config
    const PRICE = 35.00;

    // Size selection
    let selectedSize = null;
    const sizeButtons = [...document.querySelectorAll('.size')];
    const addToCartBtn = document.getElementById('addToCart');
    sizeButtons.forEach(b=>{
      b.addEventListener('click', ()=>{
        sizeButtons.forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
        selectedSize = b.dataset.size;
        addToCartBtn.disabled = false;
      });
    });

    // Qty
    const qtyInput = document.getElementById('qty');

    // Cart state
    const cart = [];
    const cartDrawer = document.getElementById('cartDrawer');
    const cartLines = document.getElementById('cartLines');
    const subtotalEl = document.getElementById('subtotal');

    function fmt(n){ return `$${n.toFixed(2)}`; }

    function renderCart(){
      cartLines.innerHTML = '';
      let subtotal = 0;
      cart.forEach((line, i)=>{
        subtotal += line.qty * line.price;
        const row = document.createElement('div');
        row.className = 'line';
        row.innerHTML = `
          <span>${line.product} — <strong>${line.size}</strong> × ${line.qty}</span>
          <span>${fmt(line.qty*line.price)}</span>
        `;
        cartLines.appendChild(row);
      });
      subtotalEl.textContent = fmt(subtotal);
    }

    function openCart(){ cartDrawer.classList.add('open'); cartDrawer.setAttribute('aria-hidden','false'); }
    function closeCart(){ cartDrawer.classList.remove('open'); cartDrawer.setAttribute('aria-hidden','true'); }

    document.getElementById('openCartBtn').addEventListener('click', openCart);
    document.getElementById('closeCartBtn').addEventListener('click', closeCart);

    // Mobile navigation
    function openMobileNav() {
      document.getElementById('mobileNav').classList.add('show');
    }
    
    function closeMobileNav() {
      document.getElementById('mobileNav').classList.remove('show');
    }
    
    document.getElementById('mobileMenuBtn').addEventListener('click', openMobileNav);
    document.getElementById('mobileNavClose').addEventListener('click', closeMobileNav);

    // Add to cart
    addToCartBtn.addEventListener('click', ()=>{
      const qty = Math.max(1, parseInt(qtyInput.value||'1',10));
      if(!selectedSize) return;
      cart.push({
        product:'QULTURE Hoodie',
        size:selectedSize,
        qty,
        price:PRICE
      });
      renderCart();
      openCart();
    });

    // Initialize email service (wait for EmailJS to load)
    let emailService;
    window.addEventListener('load', () => {
      emailService = new EmailService();
      console.log('EmailJS initialized:', typeof emailjs !== 'undefined' ? '✓' : '✗');
    });

    // Checkout form with email notifications
    const checkoutForm = document.getElementById('checkoutForm');
    checkoutForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if(cart.length===0){ alert('Your cart is empty. Add a hoodie first.'); return; }
      
      const data = Object.fromEntries(new FormData(checkoutForm).entries());
      const order = { 
        items:cart, 
        customer:data, 
        subtotal: subtotalEl.textContent, 
        createdAt:new Date().toISOString(),
        storefront: 'Original'
      };
      
      // Show loading state
      const submitBtn = checkoutForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Processing...';
      submitBtn.disabled = true;
      
      try {
        // Send email notifications
        if (!emailService) {
          throw new Error('Email service not initialized yet');
        }
        const emailSent = await emailService.sendOrderNotification(order);
        await emailService.sendCustomerConfirmation(order);
        
        // Save locally as backup
        localStorage.setItem('qultureLastOrder', JSON.stringify(order));
        console.log('QULTURE order:', order);
        
        if (emailSent) {
          alert('Order received! Check your email for confirmation. We\'ll process your order soon.');
        } else {
          alert('Order received! (Email notification failed, but order is saved locally)');
        }
        
        // Reset cart
        cart.length = 0; renderCart(); closeCart();
        checkoutForm.reset();
        
      } catch (error) {
        console.error('Order processing error:', error);
        alert('Order received! (There was an issue with notifications, but your order is saved)');
        
        // Still reset cart even if email fails
        cart.length = 0; renderCart(); closeCart();
        checkoutForm.reset();
      } finally {
        // Reset button state
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });

    // Countdown to next Feb 9
    function nextFeb9(){
      const now = new Date();
      let year = now.getFullYear();
      const target = new Date(year, 1, 9, 0,0,0); // month index 1 = Feb
      if(target <= now) target.setFullYear(year+1);
      return target;
    }
    const countdownEl = document.getElementById('countdown');
    function tick(){
      const t = nextFeb9() - new Date();
      const s = Math.max(0, Math.floor(t/1000));
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const sec = s%60;
      countdownEl.textContent = `${d}d ${h}h ${m}m ${sec}s`;
      requestAnimationFrame(()=>setTimeout(tick, 1000));
    }
    tick();
  </script>
</body>
</html>